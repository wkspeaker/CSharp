## SmallTools解决方案架构设计总结

### 🎯 项目架构目标

创建一个名为"SmallTools"的解决方案，用于管理多个小工具项目，实现代码复用和统一管理。

### 📁 推荐的项目结构

```
SmallTools/
├── SmallTools.sln                    # 解决方案文件
├── SmallTools.Core/                  # 核心业务逻辑库
│   ├── SmallTools.Core.csproj
│   ├── Models/                       # 数据模型
│   ├── Services/                     # 服务接口
│   └── Interfaces/                   # 接口定义
└── SmallTools.Main/                  # 主启动应用（包含通用UI组件）
    ├── SmallTools.Main.csproj
    ├── Views/                        # 主界面
    ├── ViewModels/                   # 主界面ViewModel
    ├── Common/                       # 通用UI组件
    │   ├── BaseViewModel.cs
    │   ├── BaseDataService.cs
    │   └── RelayCommand.cs
    └── App.xaml
```

### 🔧 项目职责分工

#### SmallTools.Core - 核心业务逻辑
- 职责：纯业务逻辑，无UI依赖
- 内容：数据模型、接口定义、业务逻辑
- 依赖：只依赖.NET标准库，无Prism依赖
- 示例内容：
	- `IDataService<T>` 接口
	- BaseModel 基类
	- ToolInfo 工具信息类
#### SmallTools.Main - 主启动应用
- 职责：应用启动、工具导航、主界面
- 内容：主界面、通用UI组件、MVVM基础设施
- 依赖：Prism.Wpf + SmallTools.Core
- 示例内容：
	- BaseViewModel 基类
	- `BaseDataService<T>` 通用数据服务
	- MainViewModel 主界面逻辑
### 🎯 核心功能需求
#### 1. 代码复用机制
- 通用约定：所有项目通过JSON文件保存数据
- 自动保存：启动时加载，退出时保存
- 共享服务：Models对象和Data交互的Services可复用
- 通用组件：Helper类可在所有项目中复用

#### 2. 主界面导航
- 启动方式：启动时显示主界面，通过菜单/按钮跳转到具体工具
- 工具管理：每个工具作为独立项目，通过主界面启动
- 统一入口：所有工具通过主界面统一管理
#### 3. 工具项目集成
- 现有项目：将TimeCalculatorForGuild迁移到解决方案中
- 新工具：ToolB、ToolC等新工具作为独立项目
- 统一架构：所有工具遵循相同的开发模式
### 🔧 技术实现方案
#### 项目依赖关系
```
SmallTools.Main → SmallTools.Core
TimeCalculatorForGuild → SmallTools.Core
ToolB → SmallTools.Core
ToolC → SmallTools.Core
```
#### Prism.Wpf依赖配置
```
- SmallTools.Core：无Prism依赖（纯业务逻辑）
- SmallTools.Main：有Prism依赖（UI和MVVM）
- 各工具项目：有Prism依赖（具体工具UI）
```

#### 数据持久化机制
- JSON文件存储：所有工具使用JSON格式保存数据
- 自动加载：应用启动时自动加载数据
- 自动保存：应用退出时自动保存数据
- 统一路径：Data/{ToolName}/目录结构

### 🚀 实施步骤

#### 阶段1：创建解决方案结构
1. 创建SmallTools解决方案
2. 创建SmallTools.Core项目（类库，.NET 8.0）
3. 创建SmallTools.Main项目（WPF应用，.NET 8.0）
4. 配置项目依赖关系
5. 为SmallTools.Main添加Prism.Wpf依赖

#### 阶段2：迁移现有项目
1. 将TimeCalculatorForGuild项目迁移到解决方案中
2. 重构代码以使用共享库
3. 实现自动保存和加载机制

#### 阶段3：实现主界面
1. 创建主界面和导航逻辑
2. 实现工具注册机制
3. 测试工具启动和切换

#### 阶段4：扩展新工具
1. 创建新工具项目模板
2. 实现工具注册和启动
3. 验证代码复用效果

### 💡 架构优势
1. 代码复用：通用逻辑在Core中共享
2. 统一管理：所有工具在一个解决方案中
3. 标准化：统一的开发约定和模式
4. 易于扩展：新工具只需遵循既定模式
5. 维护性：核心逻辑集中管理，易于维护

### 📋 下一步操作
1. 在新目录下创建SmallTools解决方案
2. 创建SmallTools.Core和SmallTools.Main项目
3. 配置项目依赖和Prism.Wpf
4. 开始实现核心共享库功能

这个架构设计既保持了现有项目的独立性，又实现了代码复用和统一管理，非常适合您的小工具集合需求。